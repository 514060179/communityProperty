(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointment-appointment"],{"0669":function(t,e,n){"use strict";n.r(e);var a=n("3239"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"285d":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniLoadMore:n("bcc2").default,noDataPage:n("31c4").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-bar bg-white search "},[n("v-uni-view",{staticClass:"search-form round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:t.$t("enter_verification_code"),"confirm-type":"search"},model:{value:t.repairName,callback:function(e){t.repairName=e},expression:"repairName"}})],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn bg-gradual-blue shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanCodeHandler()}}},[t._v(t._s(t.$t("scan_code")))]),n("v-uni-button",{staticClass:"cu-btn bg-gradual-red shadow-blur round",staticStyle:{"margin-left":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmTimeId(t.repairName)}}},[t._v(t._s(t.$t("verification")))])],1)],1),0==t.noData?n("v-uni-view",[t._l(t.myOrders,(function(e,a){return n("v-uni-view",{key:a,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[n("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[n("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("order_number"))),n("span",{staticClass:"text-gray",staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.orderId))])])],1),n("v-uni-view",{staticClass:"flex margin-top justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("venue")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.spaceName))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_date")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.appointmentTime))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_time")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.hours))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reserver")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.personName))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_phone")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.personTel))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("verification_time")))]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.createTime))])],1),n("v-uni-view",{staticClass:"solid-top flex justify-end margin-top padding-top-sm "})],1)})),n("uni-load-more",{attrs:{status:t.loadingStatus,"content-text":t.loadingContentText}})],2):n("v-uni-view",[n("no-data-page")],1)],1)},o=[]},3239:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d4b5"),n("c223");var i=a(n("31c4")),o=a(n("bcc2")),s=a(n("f0de")),r=n("2d9e"),u=n("c6e3"),c=n("9ef9"),d=a(n("9b8e"));d.default.prototype.$preventClick=c.preventClick;var l={data:function(){var t=this,e=function(e){return t.$t(e)};return{onoff:!0,orderImg:s.default.baseUrl+"img/order.png",myOrders:[],orders:[],storeId:"",noData:!1,page:1,loadingStatus:"loading",loadingContentText:{contentdown:e("pull_up_to_load_more"),contentrefresh:e("loading"),contentnomore:e("no_more")},repairStates:[{name:e("please_select")}],repairStatesIndex:0,repairState:"",repairName:"",modal:{showModal:!1,title:e("pause_reason"),text:e("please_enter_pause_reason")}}},components:{noDataPage:i.default,uniLoadMore:o.default},onLoad:function(){this.java110Context.onLoad()},onShow:function(){var t=this.java110Context.getUserInfo(),e=t.storeId;this.storeId=e,this.myOrders=[],this.page=1,this._loadMyModify()},onReachBottom:function(){"noMore"!=this.loadingStatus&&this._loadMyModify()},methods:{scanCodeHandler:function(){var t=this;uni.scanCode({onlyFromCamera:!0,scanType:["qrCode"],autoZoom:!1,success:function(e){console.log("扫码结果：".concat(JSON.stringify(e,null,2))),t.parseQRCode(e)},fail:function(t){console.log("错误：".concat(t))},complete:function(t){console.log("ok！")}})},parseQRCode:function(t){uni.vibrateShort(),console.log({title:t.result}),this.comfirmTimeId(t.result)},_searchRepair:function(){this.myOrders=[],this.page=1,this._loadMyModify()},repairStatesChange:function(t){if(this.repairStatesIndex=t.target.value,0!=this.repairStatesIndex){var e=this.repairStates[this.repairStatesIndex];this.repairState=e.statusCd}else this.repairState=""},checkAuth:function(t){return this.java110Context.hasPrivilege(t)},_loadMyModify:function(){this.loadingStatus="more";var t=this,e=this.java110Context.getUserInfo(),n=(e.storeId,{page:t.page,row:15,userId:e.userId,communityId:(0,r.getCurrentCommunity)().communityId,repairName:t.repairName,state:t.repairState});this.java110Context.request({url:s.default.listCommunitySpaceConfirmOrder,header:t.java110Context.getHeaders(),method:"GET",data:n,success:function(e){var n=e.data;if(0!=n.code)return uni.showToast({icon:"none",title:n.msg}),void(t.onoff=!0);t.myOrders=[];var a=n.data;return t.myOrders=t.myOrders.concat(a),t.myOrders.length<1?(t.noData=!0,void(t.onoff=!0)):(t.noData=!1,t.myOrders.length==n.total?(t.loadingStatus="noMore",void(t.onoff=!0)):void 0)},fail:function(e){wx.showToast({title:t.$t("server_error"),icon:"none",duration:2e3})}},0==this.myOrders.length)},navigateToScan:function(){setTimeout((function(){uni.navigateTo({url:"/pages/appointment/hou_one"})}),300)},comfirmTimeId:function(t){var e=this;""!=t&&(e.repairName=t,setTimeout((function(){uni.showModal({cancelText:"取消",confirmText:e.$t("verification"),content:e.$t("check_off_code")+":"+t,success:function(t){if(t.confirm){wx.showToast({title:e.$t("please_wait"),icon:"none"});var n={timeId:e.repairName,communityId:(0,r.getCurrentCommunity)().communityId};(0,u.saveCommunitySpaceConfirmOrder)(e,n,!0).then((function(t){uni.showToast({title:"操作成功"}),e.repairName="",wx.hideLoading(),e._loadMyModify()}))}}})}),1e3))}}};e.default=l},"9ef9":function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getFileType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("."),n=e[e.length-1];if(!n)return"";n=n.toLocaleLowerCase();var a=["png","jpg","jpeg","bmp","gif","webp"];if(a.includes(n))return"image";var i=["mp4","m4v"];if(i.includes(n))return"video";var o=["mp3","m4a","wav","aac"];if(o.includes(n))return"audio";var s=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","plain"];return s.includes(n)?"office":"unknown"},e.preventClick=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.onoff?(n.onoff=!1,t(e)):uni.showToast({title:"操作过于频繁",icon:"none"})},n("4626")},c6e3:function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.saveCommunitySpaceConfirmOrder=function(t,e,n){return new Promise((function(a,o){t.context.post({url:i.default.saveCommunitySpaceConfirmOrder,data:e,success:function(t){0==t.data.code?a(t):wx.showToast({title:"核销状态:"+t.data.msg,icon:"none",duration:3e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}},n)}))},n("bf0f");var i=a(n("f0de"))},f3e9:function(t,e,n){"use strict";n.r(e);var a=n("285d"),i=n("0669");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var s=n("828b"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"24136b23",null,!1,a["a"],void 0);e["default"]=r.exports}}]);