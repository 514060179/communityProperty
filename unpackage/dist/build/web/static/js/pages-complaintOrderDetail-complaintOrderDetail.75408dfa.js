(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-complaintOrderDetail-complaintOrderDetail"],{3502:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.auditComplaint=function(t,e){return new Promise((function(i,n){t.context.post({url:s.default.auditComplaint,data:e,success:function(t){i(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.getComplaintAppraise=function(t,e){return new Promise((function(i,n){e.context.get({url:s.default.listComplaintAppraise,data:t,success:function(t){var e=t.data;0==e.code?i(e):uni.showToast({title:e.msg})},fail:function(t){n(t)}})}))},e.getComplaintEvent=function(t,e){return new Promise((function(i,n){e.context.get({url:s.default.listComplaintEvent,data:t,success:function(t){var e=t.data;0==e.code?i(e):uni.showToast({title:e.msg})},fail:function(t){n(t)}})}))},e.loadCompaintFinish=function(t,e){return new Promise((function(i,n){t.context.get({url:s.default.listAuditHistoryComplaints,data:e,success:function(t){i(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.loadTodoCompaint=function(t,e){return new Promise((function(i,n){t.context.get({url:s.default.listAuditComplaints,data:e,success:function(t){i(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.replyComplaintAppraise=function(t,e){return new Promise((function(i,n){e.context.post({url:s.default.replyComplaintAppraise,data:t,success:function(t){i(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},i("bf0f");var s=n(i("f3d1"))},4822:function(t,e,i){"use strict";i.r(e);var n=i("7725"),s=i("4e67");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);var c=i("828b"),o=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,"6c31647b",null,!1,n["a"],void 0);e["default"]=o.exports},"4e67":function(t,e,i){"use strict";i.r(e);var n=i("c3c3"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},7725:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"padding margin-top"},[i("v-uni-text",[t._v(t._s(t.$t("order_information")))])],1),i("v-uni-view",{staticClass:"cu-list menu"},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-edit text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("complainant_code")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.complaintId))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-ticket text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("house_code")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.roomName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-footprint text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("type")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.typeName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-profile text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("complainant")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.complaintName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-phone text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("complainant_phone")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.tel))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-green"}),i("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.$t("complainant_time")))])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.auditHistoryOrder.createTime))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content padding-tb-sm"},[i("v-uni-view",[i("v-uni-text",{staticClass:"cuIcon-comment text-blue margin-right-xs"}),t._v(t._s(t.$t("complainant_content")))],1),i("v-uni-view",{staticClass:"text-gray text-sm"},[i("v-uni-text",{staticClass:"cuIcon-infofill margin-right-xs"}),t._v(t._s(t.auditHistoryOrder.context))],1)],1)],1)],1),i("v-uni-view",{staticClass:"cu-timeline margin-top"},[i("v-uni-view",{staticClass:"cu-time"},[t._v(t._s(t.$t("work_order")))]),t._l(t.audits,(function(e,n){return i("v-uni-view",{key:n,staticClass:"cu-item "},["1000"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(e.createUserName)+" 于")]),t._v(t._s(e.createTime)+" "+t._s(t.$t("complain")))],1):t._e(),"1001"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(e.createUserName)+" 于")]),t._v(t._s(e.createTime)+t._s(t.$t("handle")))],1):t._e(),"1001"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(t.$t("handling_uggestion"))+"：")]),t._v(t._s(e.remark))],1):t._e(),"2002"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(e.createUserName)+" 于")]),t._v(t._s(e.createTime)+t._s(t.$t("evaluate")))],1):t._e(),"2002"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(t.$t("evaluation_content"))+"：")]),t._v(t._s(e.remark))],1):t._e(),"3003"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(e.createUserName)+" 于")]),t._v(t._s(e.createTime)+t._s(t.$t("recover")))],1):t._e(),"3003"==e.eventType?i("v-uni-view",{staticClass:"bg-cyan content"},[i("v-uni-text",[t._v(t._s(t.$t("recover_content"))+"：")]),t._v(t._s(e.remark))],1):t._e()],1)}))],2),t._l(t.appraise,(function(e,n){return i("v-uni-view",{key:n,staticClass:"margin-top bg-white padding"},[i("v-uni-view",{staticClass:"flex justify-between"},[i("v-uni-view",[t._v(t._s(t.$t("work_order_evaluation")))]),i("v-uni-view",["W"==e.state?i("v-uni-button",{staticClass:"cu-btn sm bg-green  margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.replyAppraise(e)}}},[t._v(t._s(t.$t("recover")))]):t._e()],1)],1),i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-text",[t._v(t._s(t.$t("evaluation_content"))+"：")]),i("v-uni-text",[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-text",[t._v(t._s(t.$t("evaluation_score"))+"：")]),i("v-uni-text",[t._v(t._s(e.score))])],1),"C"==e.state?i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-text",[t._v(t._s(t.$t("recover_content"))+"：")]),i("v-uni-text",[t._v(t._s(e.replyContext))])],1):t._e()],1)})),i("v-uni-view",{staticClass:"cu-modal",class:t.viewImage?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"bg-img",style:"background-image: url("+t.viewImageSrc+");height:800rpx;"},[i("v-uni-view",{staticClass:"cu-bar justify-end text-white"},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeViewImage()}}},[i("v-uni-text",{staticClass:"cuIcon-close "})],1)],1)],1)],1)],1)],2)},s=[]},c3c3:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("3502"),s=i("dae2"),a={data:function(){return{complaintId:"",auditHistoryOrder:{},audits:[],appraise:[],srcPath:"",viewImage:!1,viewImageSrc:""}},onLoad:function(t){this.java110Context.onLoad();var e=t.complaintId;console.log("options",t),this.complaintId=e,this.srcPath=this.url.hcBaseUrl},onShow:function(){this._loadComplaintHistoryOrder(),this._listWorkflowAuditInfo(),this._listComplaintAppraise()},methods:{_loadComplaintHistoryOrder:function(){this.auditHistoryOrder=wx.getStorageSync("_complaintOrderDetail_"+this.complaintId)},_listWorkflowAuditInfo:function(t){var e=this;(0,n.getComplaintEvent)({complaintId:e.complaintId,page:1,row:100,communityId:(0,s.getCurrentCommunity)().communityId},this).then((function(t){e.audits=t.data}))},_listComplaintAppraise:function(){var t=this;(0,n.getComplaintAppraise)({complaintId:t.complaintId,page:1,row:100,communityId:(0,s.getCurrentCommunity)().communityId},this).then((function(e){t.appraise=e.data}))},preview:function(t){console.log("图片地址",t);var e=t.target.dataset.url;this.viewImageSrc=e,this.viewImage=!0},closeViewImage:function(){this.viewImage=!1},replyAppraise:function(t){uni.navigateTo({url:"/pages/complaintOrderDetail/replyComplainAppraise?appraiseId="+t.appraiseId+"&communityId="+(0,s.getCurrentCommunity)().communityId})}}};e.default=a}}]);