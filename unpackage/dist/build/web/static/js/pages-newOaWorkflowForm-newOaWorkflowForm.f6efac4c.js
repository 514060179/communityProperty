(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-newOaWorkflowForm-newOaWorkflowForm"],{"1fd6":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",e._l(e.components,(function(t,a){return n("v-uni-view",["text"==t.type?n("v-uni-view",{staticClass:"block__title"},[e._v(e._s(t.text))]):e._e(),"textfield"==t.type?n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-input",{staticClass:"text-right",attrs:{type:"text",placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),"number"==t.type?n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-input",{staticClass:"text-right",attrs:{type:"number",placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),"textarea"==t.type?n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-textarea",{attrs:{placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),"textdate"==t.type?n("v-uni-view",{staticClass:"cu-form-group arrow margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-picker",{attrs:{mode:"date",value:t.value,start:"2010-09-01",end:"2050-09-01"},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.dateChange(n,t)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(t.value))])],1)],1):e._e(),"textdatetime"==t.type?n("v-uni-view",{staticClass:"cu-form-group arrow margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-picker",{attrs:{mode:"time",value:t.value,start:"00:00",end:"23:59"},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.timeChange(n,t)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(t.value))])],1)],1):e._e(),"radio"==t.type?n("v-uni-view",{staticClass:"cu-form-group arrow margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-picker",{attrs:{bindchange:"PickerChange",value:t.valueIndex,"range-key":"label",range:t.values},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.selectChange(n,t)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(0==t.values.length?e.$t("please_select"):t.values[t.valueIndex].label))])],1)],1):e._e(),"select"==t.type?n("v-uni-view",{staticClass:"cu-form-group arrow margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-picker",{attrs:{bindchange:"PickerChange",value:t.valueIndex,"range-key":"label",range:t.values},on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.selectChange(n,t)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(0==t.values.length?e.$t("please_select"):t.values[t.valueIndex].label))])],1)],1):e._e(),"checkbox"==t.type?n("v-uni-checkbox-group",{staticClass:"block",on:{change:function(n){arguments[0]=n=e.$handleEvent(n),e.checkboxChange(n,t)}}},[n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v(e._s(t.label))]),n("v-uni-checkbox",{class:t.value==t.label?"checked":"",attrs:{checked:t.value==t.label,value:t.label}})],1)],1):e._e(),"button"==t.type&&"submit"==t.action?n("v-uni-view",{staticClass:" text-right"},[n("v-uni-view",{staticClass:"button_up_blank"}),n("v-uni-view",[e._v(e._s(e.fileName))]),n("v-uni-view",{staticClass:"flex flex-direction"},[n("v-uni-button",{staticClass:"cu-btn bg-white margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._doUploadFile()}}},[e._v(e._s(e.$t("上传附件")))])],1)],1):e._e(),"button"==t.type&&"submit"==t.action?n("v-uni-view",[n("v-uni-view",{staticClass:"flex flex-direction"},[n("v-uni-button",{staticClass:"cu-btn bg-green margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._doSubmit()}}},[e._v(e._s(t.label))])],1)],1):e._e(),"button"==t.type&&"reset"==t.action?n("v-uni-view",[n("v-uni-view",{staticClass:"button_up_blank"}),n("v-uni-view",{staticClass:"flex flex-direction"},[n("v-uni-button",{staticClass:"cu-btn bg-white margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._doReset()}}},[e._v(e._s(t.label))])],1)],1):e._e()],1)})),1)},o=[]},2935:function(e,t,n){"use strict";n.r(t);var a=n("1fd6"),o=n("95b6");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("a07d");var r=n("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"a477618c",null,!1,a["a"],void 0);t["default"]=s.exports},"5d1a":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.auditOaWorkflow=function(e,t){return new Promise((function(n,a){e.context.post({url:o.default.auditOaWorkflow,data:t,success:function(e){n(e)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.auditUndo=function(e,t,n){return new Promise((function(a,o){e.context.post({url:t,data:n,success:function(e){a(e)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.getNextTask=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.getNextTask,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.listRunWorkflowImage=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.listRunWorkflowImage,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryNextDealUser=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryNextDealUser,data:t,success:function(e){if(0!=e.data.code)a("未包含数据");else{var t=e.data.data;n(t)}},fail:function(e){a(e)}})}))},t.queryOaWorkflow=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflow,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryOaWorkflowForm=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflowForm,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryOaWorkflowFormData=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflowFormData,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryOaWorkflowUser=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflowUser,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryOaWorkflowUserHisTaskFormData=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflowUserHisTaskFormData,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryOaWorkflowUserTaskFormData=function(e,t){return new Promise((function(n,a){e.context.get({url:o.default.queryOaWorkflowUserTaskFormData,data:t,success:function(e){0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.saveOaWorkflowFormData=function(e,t){return new Promise((function(n,a){e.context.post({url:o.default.saveOaWorkflowFormData,data:t,success:function(e){n(e)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},t.updateOaWorkflowFormData=function(e,t){return new Promise((function(n,a){e.context.post({url:o.default.updateOaWorkflowFormData,data:t,success:function(e){n(e)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},n("bf0f");var o=a(n("f3d1"))},"5d63":function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".block__title[data-v-a477618c]{margin:0;font-weight:400;font-size:14px;color:rgba(69,90,100,.6);padding:%?40?% %?30?% %?20?%}.button_up_blank[data-v-a477618c]{height:%?40?%}",""]),e.exports=t},8909:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("2797"),n("de6c"),n("7a76"),n("c9b5");var a=n("39d4"),o=n("5d1a"),i=n("6063"),r={data:function(){return{formJson:{},components:[],flowId:"",flowName:"",fileName:"",realFileName:""}},onLoad:function(e){this.java110Context.onLoad(),this.flowId=e.flowId,this.flowName=e.flowName,this._loadForm()},methods:{_loadForm:function(){var e=this;(0,o.queryOaWorkflowForm)(this,{page:1,row:1,flowId:this.flowId}).then((function(t){e.formJson=JSON.parse(t.data[0].formJson),console.log(e.formJson),e.components=e.formJson.components,e.components.forEach((function(t){t.value="","textdate"!=t.type&&"textdatetime"!=t.type||(t.value=e.$t("please_select")),"radio"!=t.type&&"select"!=t.type||(t.valueIndex=0)}))}))},dateChange:function(e,t){t.value=e.detail.value,this.$forceUpdate()},timeChange:function(e,t){t.value=e.detail.value,this.$forceUpdate()},checkboxChange:function(e,t){t.value=e.detail.value,console.log(t,e.detail),this.$forceUpdate()},selectChange:function(e,t){t.valueIndex=e.target.value;var n=t.values[t.valueIndex];void 0!=n&&(t.value=n.value,this.$forceUpdate())},_doSubmit:function(){var e=this,t=this.components,n={fileName:this.fileName,realFileName:this.realFileName};t.forEach((function(t){if(t.validate&&1==t.validate.required&&(0,i.isEmpty)(t.value))throw uni.showToast({title:t.label+e.$t("不能为空"),icon:"none",duration:2e3}),Error(t.label+e.$t("不能为空"));"button"!=t.type&&"text"!=t.type&&(n[t.key]=t.value,"checkbox"==t.type&&(n[t.key]=t.value.length>0?t.value[0]:""))})),n.flowId=this.flowId,(0,o.saveOaWorkflowFormData)(this,n).then((function(t){if(0==t.data.code)return uni.showToast({title:e.$t("提交成功"),icon:"none",duration:2e3}),void uni.navigateBack({delta:1});uni.showToast({title:t.data.msg,icon:"none",duration:2e3})}),(function(t){uni.showToast({title:e.$t("网络异常"),icon:"none",duration:2e3})}))},_doReset:function(){var e=this;e.components.forEach((function(t){t.value="","textdate"!=t.type&&"textdatetime"!=t.type||(t.value=e.$t("请选择")),"radio"!=t.type&&"select"!=t.type||(t.valueIndex=0)})),this.$forceUpdate()},_doUploadFile:function(){var e=this;uni.chooseFile({count:1,extension:[".zip"],success:function(t){console.log(t),t.tempFiles[0].size/1024/1024>20?e.$refs.uToast.show({title:_that.$t("附件大小不能超过20M"),type:"warning"}):e.resultPath(t.tempFilePaths[0],t.tempFiles[0].name)}})},resultPath:function(e,t){var n=this,o=this;uni.showLoading({title:o.$t("上传中")}),uni.uploadFile({url:"/callComponent/upload/uploadVedio/upload",filePath:e,name:"uploadFile",header:(0,a.getHeaders)(),formData:{},success:function(e){uni.hideLoading();var t=JSON.parse(e.data);o.fileName=t.fileName,o.realFileName=t.realFileName},fail:function(e){n.$refs.uToast.show({title:o.$t("上传失败"),type:"error"}),uni.hideLoading()}})}}};t.default=r},"95b6":function(e,t,n){"use strict";n.r(t);var a=n("8909"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},a07d:function(e,t,n){"use strict";var a=n("bf1f"),o=n.n(a);o.a},bf1f:function(e,t,n){var a=n("5d63");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("967d").default;o("3f696ac6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);