(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-resource-addItemOut~pages-resource-addPurchaseApply~pages-resource-allocationStorehouseApply~p~bea5b33b"],{"1cdc":function(t,e,n){var o=n("ca32");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=n("967d").default;s("ee6c6300",o,!0,{sourceMap:!1,shadowMode:!1})},"3d41":function(t,e,n){"use strict";n.r(e);var o=n("f6cc"),s=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=s.a},"56ad":function(t,e,n){"use strict";var o=n("1cdc"),s=n.n(o);s.a},"7b5c":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.showModel?"show":""},[n("v-uni-view",{staticClass:"cu-dialog"},[n("v-uni-view",{staticClass:"cu-bar bg-white search "},[n("v-uni-view",{staticClass:"search-form round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:"请输入物品名","confirm-type":"search"},model:{value:t.resName,callback:function(e){t.resName=e},expression:"resName"}})],1),n("v-uni-view",{staticClass:"search-form round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:"请输入物品编码","confirm-type":"search"},model:{value:t.resCode,callback:function(e){t.resCode=e},expression:"resCode"}})],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$preventClick(t._searchStoreHouses)}}},[t._v("搜索")])],1)],1),n("v-uni-scroll-view",{staticStyle:{height:"800upx"},attrs:{"scroll-y":!0}},[n("v-uni-view",{},[n("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkboxChange.apply(void 0,arguments)}}},t._l(t.resourceList,(function(e,o){return n("v-uni-view",{key:o,staticClass:"cu-list menu-avatar "},[n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",[n("v-uni-checkbox",{attrs:{value:e.resId,checked:e.checked}})],1),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"text-grey"},[n("v-uni-text",{staticClass:"ellip"},[t._v(t._s(e.resName)+"("+t._s(e.parentRstName)+">"+t._s(e.rstName)+")")])],1),n("v-uni-view",{staticClass:"text-gray text-sm flex"},[n("v-uni-view",{staticClass:"text-cut"},[t._v("仓库："+t._s(e.shName)+" > 规格："+t._s(e.rssName))])],1),n("v-uni-view",{staticClass:"text-gray text-sm flex"},[n("v-uni-view",{staticClass:"text-cut"},[t._v("价格："+t._s(e.price)+" > 库存："+t._s(e.stock))])],1)],1)],1)],1)})),1)],1),n("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._loadResourceList()}}},[t._v("加载更多")])],1),n("v-uni-view",{staticClass:"btn-box"},[n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel()}}},[t._v("取消")]),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveSelected()}}},[t._v("保存")])],1)],1)],1)],1)},s=[]},"91e9":function(t,e,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.allocationStoreEnter=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.allocationStoreEnter,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.deleteAllocationStorehouse=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.deleteAllocationStorehouse,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.deletePurchaseApply=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.deletePurchaseApply,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.getAllocationHisAudit=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listAllocationStoreHisAuditOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listAllocationStorehouseApplys=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listAllocationStorehouseApplys,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listAllocationStorehouses=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listAllocationStorehouses,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listAuditHistoryOrders=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listAuditHistoryOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listItemOutAuditHistoryOrders=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listItemOutAuditHistoryOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listMyAllocationStoreAuditOrders=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listMyAllocationStoreAuditOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listMyAuditOrders=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listMyAuditOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listMyItemOutOrders=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listMyItemOutOrders,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listResourceStoreTypes=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listResourceStoreTypes,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listStoreHouses=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listStoreHouses,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listWorkflowAuditInfo=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listWorkflowAuditInfo,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.listWorkflowStepStaffs=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listWorkflowStepStaffs,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryFirstAuditStaff=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryFirstAuditStaff,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryFirstStaff=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryFirstStaff,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryMyResourceStoreInfo=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryResourceStoreResName,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryPurchaseApplyList=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryPurchaseApplyList,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryResourceStoreAndTimes=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.listResourceStoresAndTimes,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryResourceStoreList=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryResourceStoreList,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.queryResourceSupplier=function(t,e){return new Promise((function(n,o){t.context.get({url:s.default.queryResourceSupplier,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveAllocationStorehouse=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveAllocationStorehouse,data:e,success:function(e){t.onoff=!0,n(e.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveAuditAllocationStoreOrder=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveAuditAllocationStoreOrder,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveItemOutApply=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveItemOutApply,data:e,success:function(t){n(t.data)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3}),t.onoff=!0}})}))},e.saveMyAuditOrders=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveMyAuditOrders,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.savePurchaseApply=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.savePurchaseApply,data:e,success:function(t){n(t.data)},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3}),t.onoff=!0}})}))},e.saveResourceEnter=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveResourceEnter,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveResourceOut=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveResourceOut,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveResourceStoreTransfer=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveResourceStoreTransfer,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.saveUrgentPurchaseApply=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.saveUrgentPurchaseApply,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},e.updatePurchaseApply=function(t,e){return new Promise((function(n,o){t.context.post({url:s.default.updatePurchaseApply,data:e,success:function(t){n(t.data)},fail:function(e){t.onoff=!0,wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}})}))},n("bf0f");var s=o(n("f3d1"))},c526:function(t,e,n){"use strict";n.r(e);var o=n("7b5c"),s=n("3d41");for(var r in s)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(r);n("56ad");var i=n("828b"),u=Object(i["a"])(s["default"],o["b"],o["c"],!1,null,"117475ae",null,!1,o["a"],void 0);e["default"]=u.exports},ca32:function(t,e,n){var o=n("c86c");e=o(!1),e.push([t.i,".select-resource[data-v-117475ae]{position:fixed;top:%?100?%;left:0;background-color:#fff;width:100%;height:100%;overflow-y:scroll;z-index:1;padding-bottom:%?100?%}.btn-box[data-v-117475ae]{padding:%?40?% 0;display:flex;flex-direction:row}.btn-box uni-button[data-v-117475ae]{width:40%}.cu-list.menu-avatar>.cu-item .content[data-v-117475ae]{left:%?40?%;width:80%}.cu-list[data-v-117475ae]{margin:0}",""]),t.exports=e},cc44:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getFileType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("."),n=e[e.length-1];if(!n)return"";n=n.toLocaleLowerCase();var o=["png","jpg","jpeg","bmp","gif","webp"];if(o.includes(n))return"image";var s=["mp4","m4v"];if(s.includes(n))return"video";var r=["mp3","m4a","wav","aac"];if(r.includes(n))return"audio";var i=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","plain"];return i.includes(n)?"office":"unknown"},e.preventClick=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.onoff?(n.onoff=!1,t(e)):uni.showToast({title:"操作过于频繁",icon:"none"})},n("4626")},f6cc:function(t,e,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c223"),n("bf0f"),n("2797"),n("4626"),n("5ac7"),n("aa9c");var s=n("91e9"),r=n("dae2"),i=n("cc44"),u=o(n("9b8e"));u.default.prototype.$preventClick=i.preventClick;var a={components:{},data:function(){return{onoff:!0,showModel:!1,resourceList:[],page:1,selectedResId:[],rstId:"",resName:"",resCode:"",storeHouses:[{shName:"请选择仓库"}],resourceStoreTypes:[{rstId:"",name:"请选择类型"}],rssIndex:0,storeHousesIndex:0,shId:""}},props:{resOrderType:{type:String},shType:{type:String}},watch:{},created:function(){},computed:{},mounted:function(){},methods:{switchShow:function(t){this.showModel=!this.showModel,this.shId=t,this._loadResourceList()},storeHousesChange:function(t){if(this.storeHousesIndex=t.target.value,0!=this.storeHousesIndex){var e=this.storeHouses[this.storeHousesIndex];this.shId=e.shId}else this.shId=""},rssChange:function(t){if(this.rssIndex=t.target.value,0!=this.rssIndex){var e=this.resourceStoreTypes[this.rssIndex];this.rstId=e.rstId}else this.rstId=""},_searchStoreHouses:function(){this.resourceList=[],this.page=1,this._loadResourceList()},_loadResourceList:function(){var t=this,e={page:this.page,row:50,communityId:(0,r.getCurrentCommunity)().communityId,resOrderType:this.resOrderType,shType:this.shType,shId:this.shId,resName:this.resName,resCode:this.resCode,isShow:!0};e.shId&&(e.communityId=""),(0,s.queryResourceStoreList)(this,e).then((function(e){t.onoff=!0,e.resourceStores.length<=0?uni.showToast({title:"已全部加载"}):(t.resourceList=t.resourceList.concat(e.resourceStores),t.page++)}))},checkboxChange:function(t){var e=t.detail.value;this.selectedResId=e,this.resourceList.forEach((function(t,n){e.includes(t.resId)&&(t.checked=!0)}))},removeSelectedItem:function(t){this.resourceList.forEach((function(e,n){e.resId==t&&(e.checked=!1)}))},saveSelected:function(){var t=this.selectedResId,e=this.resourceList;if(t.length<1)uni.showToast({title:"请选择物品",icon:"none"});else{for(var n=[],o=0;o<t.length;o++)for(var s=0;s<e.length;s++)t[o]==e[s].resId&&(e[s].remark="",n.push(e[s]));this.$emit("getResourceInfo",n),this.showModel=!1}},cancel:function(){this.showModel=!1}}};e.default=a}}]);