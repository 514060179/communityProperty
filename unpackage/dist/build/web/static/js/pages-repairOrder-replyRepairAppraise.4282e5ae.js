(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repairOrder-replyRepairAppraise"],{3121:function(e,t,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.appraiseRepair=function(e,t){return new Promise((function(n,r){if(""!=e.remark)if(""!=e.repairId){var a={repairId:e.repairId,repairType:e.repairType,repairChannel:e.repairChannel,publicArea:e.publicArea,communityId:e.communityId,context:e.remark};e.context.post({url:o.default.appraiseRepairNew,data:a,success:function(e){n(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},t)}else uni.showToast({title:i.default.t("wbhbxxxx"),icon:"none"});else uni.showToast({title:i.default.t("qtxpjnrs"),icon:"none"})}))},t.dispatchRepair=function(e,t){return new Promise((function(n,r){var u={staffId:e.staffId,staffName:e.staffName,context:e.content,repairId:e.repairId,repairType:e.repairType,action:e.action,communityId:(0,a.getCurrentCommunity)().communityId,photos:[],userId:e.userId,userName:e.userName},s=e.photos;s.forEach((function(e){u.photos.push({photo:e})}));var c="";""==u.context?c=i.default.t("please_enter_handling_comments"):""==u.staffId||""==u.staffName?c=i.default.t("qtxsf1"):""==u.repairId?c=i.default.t("errorData"):"TRANSFER"==u.action&&u.userId==u.staffId&&(c=i.default.t("bnzdgzj")),""==c?e.context.post({url:o.default.repairDispatch,data:u,success:function(e){n(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},t):wx.showToast({title:c,icon:"none",duration:2e3})}))},t.finishRepair=function(e,t){return new Promise((function(n,r){var u={feeFlag:e.feeFlag,context:e.content,repairId:e.repairId,repairChannel:e.repairChannel,publicArea:e.publicArea,maintenanceType:e.feeFlag,repairType:e.repairType,action:e.action,communityId:(0,a.getCurrentCommunity)().communityId,beforeRepairPhotos:[],afterRepairPhotos:[],repairObjType:e.repairObjType,userId:e.userId,userName:e.userName,storeId:e.storeId,choosedGoodsList:e.resourceStoreInfo,totalPrice:e.amount,payType:e.payType},s=e.beforeRepairPhotos;s.forEach((function(e){u.beforeRepairPhotos.push({photo:e})}));var c=e.afterRepairPhotos;c.forEach((function(e){u.afterRepairPhotos.push({photo:e})}));var f="";if(u.feeFlag?""==u.context?f=i.default.t("please_enter_handling_comments"):u.beforeRepairPhotos.length<=0||u.afterRepairPhotos.length<=0?f=i.default.t("qsctptt"):""==u.repairId?f=i.default.t("errorData"):("1001"==u.maintenanceType||"1003"==u.maintenanceType)&&u.choosedGoodsList.length<1?f=i.default.t("qxzwppp"):"1001"==u.maintenanceType&&""==u.payType?f=i.default.t("qxzzffssss"):("1001"==u.maintenanceType||"1003"==u.maintenanceType)&&u.choosedGoodsList.length>=1&&u.choosedGoodsList.forEach((function(e){(!e.useNumber||e.useNumber<1)&&(f=i.default.t("spslywww")),"1001"==u.maintenanceType&&(!e.price||e.price<0)&&(f=i.default.t("spjgywww"))})):f=i.default.t("qxzlxx"),""!=f)return wx.showToast({title:f,icon:"none",duration:2e3}),void(e.onoff=!0);"1002"!=u.maintenanceType&&"1004"!=u.maintenanceType||(u.useNumber=0,u.choosedGoodsList=[]),e.context.post({url:o.default.repairFinish,data:u,success:function(t){e.onoff=!0,n(t)},fail:function(t){e.onoff=!0,wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},t)}))},t.loadRepairStaff=function(e,t,n){return new Promise((function(r,a){e.context.get({url:o.default.listRepairTypeUsers,data:t,success:function(e){r(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},t.queryDictInfo=function(e,t,n){return new Promise((function(r,a){e.context.get({url:o.default.queryDictInfo,data:t,success:function(e){r(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},t.queryRepairInfo=function(e,t,n){return new Promise((function(r,a){e.context.get({url:o.default.queryRepairInfo,data:t,success:function(e){r(e.data)},fail:function(e){wx.showToast({title:"",icon:"none",duration:2e3})}},n)}))},t.queryResourceStoreResName=function(e,t,n){return new Promise((function(r,a){e.context.get({url:o.default.queryResourceStoreResName,data:t,success:function(e){r(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},t.repairStart=function(e,t,n){return new Promise((function(r,a){e.context.post({url:o.default.repairStart,data:t,success:function(e){r(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},t.repairStop=function(e,t,n){return new Promise((function(r,a){e.context.post({url:o.default.repairStop,data:t,success:function(e){r(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},t.replyRepairAppraise=function(e,t,n){return new Promise((function(r,a){t.context.post({url:o.default.replyRepairAppraise,data:e,success:function(e){r(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}},n)}))},n("bf0f"),n("2797"),n("aa9c");var o=r(n("f0de")),a=n("2d9e"),i=r(n("3e79"))},"8d2d":function(e,t,n){"use strict";n.r(t);var r=n("ed35"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},"942d":function(e,t,n){"use strict";n.r(t);var r=n("c4ae"),o=n("8d2d");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var i=n("828b"),u=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"5e50ee64",null,!1,r["a"],void 0);t["default"]=u.exports},c4ae:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-textarea",{attrs:{placeholder:e.$t("please_enter_reply_description")},model:{value:e.replyContext,callback:function(t){e.replyContext=t},expression:"replyContext"}})],1),n("v-uni-view",{staticClass:"flex flex-direction margin-top"},[n("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._reply()}}},[e._v("提交")])],1)],1)},o=[]},ed35:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("3121"),o=n("2d9e"),a={data:function(){return{replyContext:"",repairId:"",ruId:""}},onLoad:function(e){this.java110Context.onLoad(),this.ruId=e.ruId,this.repairId=e.repairId},methods:{_reply:function(){(0,r.replyRepairAppraise)({replyContext:this.replyContext,communityId:(0,o.getCurrentCommunity)().communityId,ruId:this.ruId,repairId:this.repairId},this,!0).then((function(e){0==e.code?uni.navigateBack({delta:1}):uni.showToast({icon:"none",title:e.data})}))}}};t.default=a}}]);