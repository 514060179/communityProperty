(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointment-appointment"],{"1e5db":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d4b5"),a("c223");var i=n(a("0437")),o=n(a("bf7c")),s=n(a("f3d1")),r=a("dae2"),u=a("2d48"),c=a("cc44"),d=n(a("9b8e"));d.default.prototype.$preventClick=c.preventClick;var l={data:function(){var t=this,e=function(e){return t.$t(e)};return{onoff:!0,orderImg:s.default.baseUrl+"img/order.png",myOrders:[],orders:[],storeId:"",noData:!1,page:1,loadingStatus:"loading",loadingContentText:{contentdown:e("pull_up_to_load_more"),contentrefresh:e("loading"),contentnomore:e("no_more")},repairStates:[{name:e("please_select")}],repairStatesIndex:0,repairState:"",repairName:"",modal:{showModal:!1,title:e("pause_reason"),text:e("please_enter_pause_reason")}}},components:{noDataPage:i.default,uniLoadMore:o.default},onLoad:function(){this.java110Context.onLoad()},onShow:function(){var t=this.java110Context.getUserInfo(),e=t.storeId;this.storeId=e,this.myOrders=[],this.page=1,this._loadMyModify()},onReachBottom:function(){"noMore"!=this.loadingStatus&&this._loadMyModify()},methods:{scanCodeHandler:function(){var t=this;uni.scanCode({onlyFromCamera:!0,scanType:["qrCode"],autoZoom:!1,success:function(e){console.log("扫码结果：".concat(JSON.stringify(e,null,2))),t.parseQRCode(e)},fail:function(t){console.log("错误：".concat(t))},complete:function(t){console.log("ok！")}})},parseQRCode:function(t){uni.vibrateShort(),console.log({title:t.result}),this.comfirmTimeId(t.result)},_searchRepair:function(){this.myOrders=[],this.page=1,this._loadMyModify()},repairStatesChange:function(t){if(this.repairStatesIndex=t.target.value,0!=this.repairStatesIndex){var e=this.repairStates[this.repairStatesIndex];this.repairState=e.statusCd}else this.repairState=""},checkAuth:function(t){return this.java110Context.hasPrivilege(t)},_loadMyModify:function(){this.loadingStatus="more";var t=this,e=this.java110Context.getUserInfo(),a=(e.storeId,{page:t.page,row:15,userId:e.userId,communityId:(0,r.getCurrentCommunity)().communityId,repairName:t.repairName,state:t.repairState});this.java110Context.request({url:s.default.listCommunitySpaceConfirmOrder,header:t.java110Context.getHeaders(),method:"GET",data:a,success:function(e){var a=e.data;if(0!=a.code)return uni.showToast({icon:"none",title:a.msg}),void(t.onoff=!0);t.myOrders=[];var n=a.data;return t.myOrders=t.myOrders.concat(n),t.myOrders.length<1?(t.noData=!0,void(t.onoff=!0)):(t.noData=!1,t.myOrders.length==a.total?(t.loadingStatus="noMore",void(t.onoff=!0)):void 0)},fail:function(e){wx.showToast({title:t.$t("server_error"),icon:"none",duration:2e3})}})},navigateToScan:function(){setTimeout((function(){uni.navigateTo({url:"/pages/appointment/hou_one"})}),300)},comfirmTimeId:function(t){var e=this;""!=t&&(e.repairName=t,setTimeout((function(){uni.showModal({cancelText:"取消",confirmText:e.$t("verification"),content:e.$t("check_off_code")+":"+t,success:function(t){if(t.confirm){wx.showToast({title:e.$t("please_wait"),icon:"none"});var a={timeId:e.repairName,communityId:(0,r.getCurrentCommunity)().communityId};(0,u.saveCommunitySpaceConfirmOrder)(e,a).then((function(t){uni.showToast({title:"操作成功"}),e.repairName="",wx.hideLoading(),e._loadMyModify()}))}}})}),1e3))}}};e.default=l},"2d48":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.saveCommunitySpaceConfirmOrder=function(t,e){return new Promise((function(a,n){t.context.post({url:i.default.saveCommunitySpaceConfirmOrder,data:e,success:function(t){0==t.data.code?a(t):wx.showToast({title:"核销状态:"+t.data.msg,icon:"none",duration:3e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},a("bf0f");var i=n(a("f3d1"))},"554d":function(t,e,a){"use strict";a.r(e);var n=a("1e5db"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},ae78:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uniLoadMore:a("bf7c").default,noDataPage:a("0437").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:t.$t("enter_verification_code"),"confirm-type":"search"},model:{value:t.repairName,callback:function(e){t.repairName=e},expression:"repairName"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanCodeHandler()}}},[t._v(t._s(t.$t("scan_code")))]),a("v-uni-button",{staticClass:"cu-btn bg-gradual-red shadow-blur round",staticStyle:{"margin-left":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmTimeId(t.repairName)}}},[t._v(t._s(t.$t("verification")))])],1)],1),0==t.noData?a("v-uni-view",[t._l(t.myOrders,(function(e,n){return a("v-uni-view",{key:n,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[a("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[a("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("order_number"))),a("span",{staticClass:"text-gray",staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.orderId))])])],1),a("v-uni-view",{staticClass:"flex margin-top justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("venue")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.spaceName))])],1),a("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_date")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.appointmentTime))])],1),a("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_time")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.hours))])],1),a("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reserver")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.personName))])],1),a("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("reservation_phone")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.personTel))])],1),a("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(t.$t("verification_time")))]),a("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.createTime))])],1),a("v-uni-view",{staticClass:"solid-top flex justify-end margin-top padding-top-sm "})],1)})),a("uni-load-more",{attrs:{status:t.loadingStatus,"content-text":t.loadingContentText}})],2):a("v-uni-view",[a("no-data-page")],1)],1)},o=[]},cc44:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getFileType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("."),a=e[e.length-1];if(!a)return"";a=a.toLocaleLowerCase();var n=["png","jpg","jpeg","bmp","gif","webp"];if(n.includes(a))return"image";var i=["mp4","m4v"];if(i.includes(a))return"video";var o=["mp3","m4a","wav","aac"];if(o.includes(a))return"audio";var s=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","plain"];return s.includes(a)?"office":"unknown"},e.preventClick=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this;a.onoff?(a.onoff=!1,t(e)):uni.showToast({title:"操作过于频繁",icon:"none"})},a("4626")},e8f6:function(t,e,a){"use strict";a.r(e);var n=a("ae78"),i=a("554d");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);var s=a("828b"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"05ff0034",null,!1,n["a"],void 0);e["default"]=r.exports}}]);