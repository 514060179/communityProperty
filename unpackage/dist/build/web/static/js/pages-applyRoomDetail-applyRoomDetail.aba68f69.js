(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-applyRoomDetail-applyRoomDetail"],{"096d":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getRoomOweFees=function(t,e,i){return new Promise((function(n,s){t.context.get({url:a.default.listOweFees,data:e,success:function(t){if(200==t.statusCode){var e=t.data.data;return e.length<1&&s(),e.forEach((function(t){t.endTime=o.default.dateTimeStringToDateString(t.endTime),t.deadlineTime=o.default.dateTimeStringToDateString(t.deadlineTime)})),void n(e)}s()},fail:function(t){s()}},i)}))},e.listFeeDetail=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.listFeeDetail,data:e,success:function(t){n(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.loadFees=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.listFee,data:e,success:function(t){n(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.queryFeeDetail=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.queryFeeDetail,data:e,success:function(t){n(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.saveRoomCreateFee=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.saveRoomCreateFee,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.toPayOweFee=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.toQrOweFeePay,data:e,success:function(t){n(t)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},i("bf0f"),i("2797");var a=n(i("f0de")),o=n(i("202c"))},"207b":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".btn-check[data-v-720023c8]{width:50%;margin:%?30?% auto;height:%?90?%;line-height:%?90?%;text-align:center;background-color:#0a0;border-radius:%?15?%;color:#fff;font-size:%?32?%}\n/* 弹出框 */.pop-bg[data-v-720023c8]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:center}.pop-box[data-v-720023c8]{position:relative;width:85%;max-height:%?1000?%;background-color:#fff;border-radius:%?15?%;padding-bottom:%?85?%}.pop-title[data-v-720023c8]{padding:%?30?% 0;text-align:center;font-size:%?32?%;font-weight:700}.pop-bottom[data-v-720023c8]{width:100%;position:absolute;bottom:0}.btn-box[data-v-720023c8]{width:90%;margin:0 auto;border-top:1px solid #f6f6f8;display:flex}.cancel[data-v-720023c8],\n.confirm[data-v-720023c8]{width:50%;height:%?100?%;line-height:%?100?%;text-align:center;font-size:%?40?%;font-weight:400}.cancel[data-v-720023c8]{color:#999}.confirm[data-v-720023c8]{color:#3488fe}.checkbox-area[data-v-720023c8]{max-height:%?160?%;overflow-y:scroll}",""]),t.exports=e},"64d7":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.cutApplyRoomDiscountRecord=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.cutApplyRoomDiscountRecord,data:e,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.loadApplyRooms=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.listApplyRoom,data:e,success:function(e){t.onoff=!0,0==e.data.code?n(e.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.loadFeeDiscount=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.queryFeeDiscount,data:e,success:function(t){0==t.data.code?n(t.data.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.queryApplyRoomRecord=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.listApplyRoomDiscountRecord,data:e,success:function(t){0==t.data.code?n(t.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.queryApplyRoomRecordDetail=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.listApplyRoomDiscountRecordDetail,data:e,success:function(t){0==t.data.code?n(t.data.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.queryDictInfo=function(t,e,i){return new Promise((function(n,o){t.context.get({url:a.default.queryDictInfo,data:e,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.saveApplyRoomDiscountRecord=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.saveApplyRoomDiscountRecord,data:e,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.uploadCheckUpdate=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.updateApplyRoomDiscount,data:e,success:function(t){0==t.data.code?n():wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},e.uploadReviewUpdate=function(t,e,i){return new Promise((function(n,o){t.context.post({url:a.default.updateReviewApplyRoomDiscount,data:e,success:function(t){0==t.data.code?n():wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},i)}))},i("bf0f");var a=n(i("f0de"))},"6f17":function(t,e,i){"use strict";var n=i("717f"),a=i.n(n);a.a},"717f":function(t,e,i){var n=i("207b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("4dfcf6f5",n,!0,{sourceMap:!1,shadowMode:!1})},"949c":function(t,e,i){"use strict";i.r(e);var n=i("f42e"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},a52d:function(t,e,i){"use strict";i.r(e);var n=i("d043"),a=i("949c");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("6f17");var s=i("828b"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"720023c8",null,!1,n["a"],void 0);e["default"]=c.exports},d043:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"cu-list menu margin-top"},[i("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showApplyRoomRecord()}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("空置房跟踪记录")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v("查看")])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-edit text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("申请ID")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.ardId))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-ticket text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("申请类型")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.applyTypeName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("申请房间")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.roomName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-profile text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("申请人")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.createUserName))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-phone text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("联系方式")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.createUserTel))])],1)],1),i("v-uni-view",{staticClass:"cu-item arrow"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("开始时间")])],1),i("v-uni-picker",{attrs:{mode:"date",value:t.applyRoomInfo.startTime,start:"2020-09-01",end:"2050-09-01",disabled:t.pickerDisabled},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.dateStartChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.applyRoomInfo.startTime))])],1)],1),i("v-uni-view",{staticClass:"cu-item arrow"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("结束时间")])],1),i("v-uni-picker",{attrs:{mode:"date",value:t.applyRoomInfo.endTime,start:"2020-09-01",end:"2050-09-01",disabled:t.pickerDisabled},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.dateEndChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.applyRoomInfo.endTime))])],1)],1),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-footprint text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("申请备注")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.createRemark))])],1)],1),t.applyRoomInfo.state>1?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-footprint text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("验房备注")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.checkRemark))])],1)],1):t._e(),t.applyRoomInfo.state>3?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-footprint text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("审核备注")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.reviewRemark))])],1)],1):t._e(),i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("当前状态")])],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-grey text-sm"},[t._v(t._s(t.applyRoomInfo.stateName))])],1)],1),1==t.applyRoomInfo.state?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("验房状态")])],1),i("v-uni-picker",{attrs:{mode:"selector",value:t.checkState.state,range:t.checkStateRange,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkStateRangeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.checkState.name?t.checkState.name:"请选择"))])],1)],1):t._e(),1==t.applyRoomInfo.state?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("验房备注")])],1),i("v-uni-input",{attrs:{type:"text"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur()}},model:{value:t.checkRemark,callback:function(e){t.checkRemark=e},expression:"checkRemark"}})],1):t._e(),1==t.applyRoomInfo.state?i("uploadImageAsync",{ref:"vcUploadRef",attrs:{maxPhotoNum:t.maxPhotoNum,sendImgList:t.sendImgList},on:{sendImagesData:function(e){arguments[0]=e=t.$handleEvent(e),t.getBase64List.apply(void 0,arguments)}}}):t._e(),2==t.applyRoomInfo.state?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("审批状态")])],1),i("v-uni-picker",{attrs:{mode:"selector",value:t.reviewState.state,range:t.reviewStateRange,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.reviewStateRangeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.reviewState.name?t.reviewState.name:"请选择"))])],1)],1):t._e(),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.applyRoomInfo.state&&4==t.reviewState.state,expression:"applyRoomInfo.state == 2 && reviewState.state == 4"}],staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("折扣类型")])],1),i("v-uni-picker",{attrs:{mode:"selector",value:t.discountType.id,range:t.discountTypeRange,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.discountTypeRangeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.discountType.name?t.discountType.name:"请选择"))])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.applyRoomInfo.state&&4==t.reviewState.state&&t.discountIdRange.length>0,expression:"applyRoomInfo.state == 2 && reviewState.state == 4 && discountIdRange.length > 0"}],staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("折扣名称")])],1),i("v-uni-picker",{attrs:{mode:"selector",value:t.discountId.discountId,range:t.discountIdRange,"range-key":"discountName"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.discountIdRangeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.discountId.discountName?t.discountId.discountName:"必填,请选择"))])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.applyRoomInfo.state&&4==t.reviewState.state,expression:"applyRoomInfo.state == 2 && reviewState.state == 4"}],staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("返还方式")])],1),i("v-uni-picker",{attrs:{mode:"selector",value:t.returnWayIndex,range:t.returnWays,"range-key":"statName"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.returnWaysChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.returnWay?t.returnWays[t.returnWayIndex].statName:"请选择返还方式"))])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.applyRoomInfo.state&&4==t.reviewState.state&&"1002"==t.returnWay,expression:"applyRoomInfo.state == 2 && reviewState.state == 4 && returnWay == '1002'"}],staticClass:"cu-item"},[i("v-uni-view",{staticClass:"checkbox-area"},[i("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkboxChange.apply(void 0,arguments)}}},t._l(t.fees,(function(e,n){return i("v-uni-view",{key:n,staticClass:"checkbox text-df text-grey"},[i("v-uni-checkbox",{attrs:{value:e.detailId,checked:e.checked}}),t._v("【"+t._s(e.feeName)+"】"),i("v-uni-text",{staticClass:"text-red"},[t._v(t._s(e.receivedAmount)+"MOP")]),t._v("- "+t._s(e.createTime))],1)})),1)],1)],1),2==t.applyRoomInfo.state?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"cuIcon-time text-blue"}),i("v-uni-text",{staticClass:"text-grey"},[t._v("审批备注")])],1),i("v-uni-input",{attrs:{type:"text"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur()}},model:{value:t.reviewRemark,callback:function(e){t.reviewRemark=e},expression:"reviewRemark"}})],1):t._e(),2==t.applyRoomInfo.state?i("uploadImageAsync",{ref:"vcUploadRef",attrs:{maxPhotoNum:t.maxPhotoNum,sendImgList:t.sendImgList,canEdit:t.canEdit,title:t.imgTitle}}):t._e(),i("v-uni-view",{staticClass:"cu-item"},[1==t.applyRoomInfo.state&&this.java110Context.hasPrivilege("502021010723590006")?i("v-uni-button",{staticClass:"btn-check",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit()}}},[t._v("验房")]):t._e(),2==t.applyRoomInfo.state&&this.java110Context.hasPrivilege("502021010761730007")?i("v-uni-button",{staticClass:"btn-check",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit()}}},[t._v("审核")]):t._e()],1)],1)],1)},a=[]},f42e:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("2797"),i("4626"),i("5ac7"),i("aa9c"),i("d4b5");var a=n(i("202c")),o=i("64d7"),s=i("096d"),c=n(i("840b")),u={data:function(){return{applyRoomInfo:{},errorSwitch:!1,checkStateRange:[{state:2,name:"验房通过"},{state:3,name:"验房不通过"}],reviewStateRange:[{state:4,name:"审批通过"},{state:5,name:"审批不通过"}],checkState:{},reviewState:{},checkRemark:"",reviewRemark:"",discountTypeRange:[{id:"3003",name:"优惠(需要申请)"}],discountType:{},discountIdRange:[],discountId:{},returnWays:[{statCd:1001,statName:"享受缴纳折扣"},{statCd:1002,statName:"返还至余额账户"}],returnWayIndex:0,returnWay:"",fees:[],selectedFees:[],maxPhotoNum:4,sendImgList:[],photos:[],canEdit:!1,imgTitle:"图片材料"}},components:{uploadImageAsync:c.default},props:{},computed:{pickerDisabled:function(){return!(1==this.applyRoomInfo.state&&this.java110Context.hasPrivilege("502021010723590006")||2==this.applyRoomInfo.state&&this.java110Context.hasPrivilege("502021010761730007"))}},onLoad:function(t){this.java110Context.onLoad();var e=this,i={page:1,row:1,communityId:t.communityId,ardId:t.ardId};(0,o.loadApplyRooms)(this,i,0==this.sendImgList.length).then((function(t){e.applyRoomInfo=t.data[0],e.sendImgList=e.applyRoomInfo.urls,console.log(e.sendImgList),e.applyRoomInfo.startTime=e.applyRoomInfo.startTime.split(" ")[0],e.applyRoomInfo.endTime=e.applyRoomInfo.endTime.split(" ")[0],e._listFeeDetail()}))},onReady:function(){},onShow:function(){},methods:{getBase64List:function(t){this.photos=t},_listFeeDetail:function(){var t=this,e={page:1,row:50,communityId:this.applyRoomInfo.communityId,feeId:this.applyRoomInfo.feeId};(0,s.listFeeDetail)(this,e,0==this.fees.length).then((function(e){t.fees=e.data.feeDetails}))},checkboxChange:function(t){var e=t.detail.value;this.selectedFees=e,this.fees.forEach((function(t,i){e.includes(t.detailId)&&(t.checked=!0)}))},empty:function(){},onBlur:function(){uni.pageScrollTo({scrollTop:0})},applyTypeChange:function(t){this.applyType=this.applyTypes[t.detail.value].applyType,this.applyTypeShow=this.applyTypes[t.detail.value].typeName},dateStartChange:function(t){this.applyRoomInfo.startTime=t.detail.value},dateEndChange:function(t){this.applyRoomInfo.endTime=t.detail.value},switchShowModel:function(){this.errorSwitch=!this.errorSwitch},discountTypeRangeChange:function(t){var e=this,i=t.detail.value;this.discountType=this.discountTypeRange[i];var n={page:1,row:100,discountType:this.discountType.id,communityId:this.applyRoomInfo.communityId};(0,o.loadFeeDiscount)(this,n,0==this.discountIdRange.length).then((function(t){e.discountIdRange=t}))},discountIdRangeChange:function(t){var e=t.detail.value;this.discountId=this.discountIdRange[e]},returnWaysChange:function(t){var e=t.detail.value;this.returnWayIndex=e,this.returnWay=this.returnWays[e].statCd},checkStateRangeChange:function(t){var e=t.detail.value;this.checkState=this.checkStateRange[e],this.checkRemark=this.checkState.name},reviewStateRangeChange:function(t){var e=t.detail.value;this.reviewState=this.reviewStateRange[e],this.reviewRemark=this.reviewState.name},submit:function(){uni.showLoading({title:"请稍候..."});var t=this,e=this.applyRoomInfo.startTime+" 0:00:00",i=this.applyRoomInfo.endTime+" 23:59:59",n=this.applyRoomInfo.ardId,s=this.applyRoomInfo.communityId,c=this.applyRoomInfo.createRemark,u={startTime:e,endTime:i,ardId:n,communityId:s,createRemark:c};if(!a.default.compareDate(this.applyRoomInfo.endTime,this.applyRoomInfo.startTime))return uni.hideLoading(),void uni.showToast({title:"时间范围有误"});if(1==this.applyRoomInfo.state){var r=this.checkState.state;if(null==r||!r)return uni.hideLoading(),void uni.showToast({title:"请选择验房状态"});var l=this.checkRemark;if(""==l||!l)return uni.hideLoading(),void uni.showToast({title:"请填写验房备注"});u.state=r,u.checkRemark=l;var d=[];this.photos.forEach((function(t){d.push(t.fileId)})),u.photos=d,(0,o.uploadCheckUpdate)(this,u,!0).then((function(t){uni.hideLoading(),uni.showToast({title:"保存成功"}),setTimeout((function(){uni.navigateBack({})}),1e3)}))}else{var v="";if(null!=this.reviewState.state&&this.reviewState.state?4!=this.reviewState.state||null!=this.discountId.discountId&&this.discountId.discountId?4==this.reviewState.state&&""==this.returnWay?v="请选择退还方式":4==this.reviewState.state&&"1002"==this.returnWay&&this.selectedFees.length<=0?v="请选择缴费记录":""==this.reviewRemark&&(v="请填写审批备注"):v="请选择优惠名称":v="请选择审批状态",""!=v)return uni.hideLoading(),void uni.showToast({title:v,icon:"none"});u.state=this.reviewState.state,u.reviewRemark=this.reviewRemark,u.discountType=this.discountType.id,u.discountId=this.discountId.discountId,u.returnWay=this.returnWay,u.selectedFees=this.selectedFees,u.feeId=this.applyRoomInfo.feeId,u.roomId=this.applyRoomInfo.roomId,u.checkRemark=this.applyRoomInfo.checkRemark,u.createRemark=this.applyRoomInfo.createRemark,u.fees=this.fees,u.configId="",u.discounts=this.discountIdRange,(0,o.uploadReviewUpdate)(this,u,!0).then((function(e){uni.hideLoading(),uni.showToast({title:"保存成功"}),setTimeout((function(){t.goBack()}),1e3)}))}},goBack:function(){var t=getCurrentPages();if(t.length>1)uni.navigateBack(1);else{var e=this.$router.go(-1);void 0==e&&uni.reLaunch({url:"/pages/applyRoom/applyRoom"})}},showApplyRoomRecord:function(){uni.navigateTo({url:"/pages/applyRoomRecord/applyRoomRecord?apply="+JSON.stringify(this.applyRoomInfo)})}}};e.default=u}}]);