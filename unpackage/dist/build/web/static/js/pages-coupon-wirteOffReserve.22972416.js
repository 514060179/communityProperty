(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-wirteOffReserve"],{"2d23":function(e,t,n){"use strict";n.r(t);var i=n("80d2"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"2d48":function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.saveCommunitySpaceConfirmOrder=function(e,t){return new Promise((function(n,i){e.context.post({url:o.default.saveCommunitySpaceConfirmOrder,data:t,success:function(e){0==e.data.code?n(e):wx.showToast({title:"核销状态:"+e.data.msg,icon:"none",duration:3e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},n("bf0f");var o=i(n("f3d1"))},"80d2":function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("39d8"));n("d4b5");var a=i(n("0437")),r=i(n("bf7c")),s=i(n("f3d1")),u=n("dae2"),c=n("f5fd"),d=n("cc44"),f=n("2d48"),l=i(n("9b8e"));l.default.prototype.$preventClick=d.preventClick;var v={data:function(){var e=this,t=function(t){return e.$t(t)};return{onoff:!0,orderImg:s.default.baseUrl+"img/order.png",reserveOrders:[],page:1,loadingStatus:"loading",loadingContentText:{contentdown:t("pull_up_to_load_more"),contentrefresh:t("loading"),contentnomore:t("no_more")},reserveQrcode:"",modal:{showModal:!1,title:t("pause_reason"),text:t("please_enter_pause_reason")}}},components:{noDataPage:a.default,uniLoadMore:r.default},onLoad:function(){this.java110Context.onLoad(),this._loadReserveUserDetail()},onShow:function(){var e=this.java110Context.getUserInfo(),t=e.storeId;this.storeId=t},methods:(0,o.default)({_loadReserveUserDetail:function(){var e=this;(0,c.getReserveGoodsConfirmOrder)(this,{page:1,row:100,communityId:(0,u.getCurrentCommunity)().communityId}).then((function(t){e.reserveOrders=t.data}))},navigateToScan:function(){setTimeout((function(){uni.navigateTo({url:"/pages/appointment/hou_one"})}),300)},comfirmTimeId:function(e){var t=this;e&&(t.reserveQrcode=e,setTimeout((function(){uni.showModal({cancelText:"取消",confirmText:t.$t("verification"),content:t.$t("check_off_code")+":"+e,success:function(n){n.confirm&&(wx.showToast({title:t.$t("please_wait"),icon:"none"}),(0,c.saveReserveGoodsConfirmOrder)(t,{timeId:e,communityId:(0,u.getCurrentCommunity)().communityId}).then((function(e){uni.showToast({title:"操作成功"}),t.reserveQrcode="",wx.hideLoading(),t._loadReserveUserDetail()})))}})}),1e3))},scanCodeHandler:function(){var e=this;uni.scanCode({onlyFromCamera:!0,scanType:["qrCode"],autoZoom:!1,success:function(t){console.log("扫码结果：".concat(JSON.stringify(t,null,2))),e.parseQRCode(t)},fail:function(e){console.log("错误：".concat(e))},complete:function(e){console.log("ok！")}})},parseQRCode:function(e){uni.vibrateShort(),console.log({title:e.result}),this.comfirmTimeId(e.result)}},"comfirmTimeId",(function(e){var t=this;""!=e&&(t.repairName=e,setTimeout((function(){uni.showModal({cancelText:"取消",confirmText:t.$t("verification"),content:t.$t("check_off_code")+":"+e,success:function(e){if(e.confirm){wx.showToast({title:t.$t("please_wait"),icon:"none"});var n={timeId:t.repairName,communityId:(0,u.getCurrentCommunity)().communityId};(0,f.saveCommunitySpaceConfirmOrder)(t,n).then((function(e){uni.showToast({title:"操作成功"}),t.repairName="",wx.hideLoading(),t._loadMyModify()}))}}})}),1e3))}))};t.default=v},bb5f:function(e,t,n){"use strict";n.r(t);var i=n("ef1d"),o=n("2d23");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var r=n("828b"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"42ec69d3",null,!1,i["a"],void 0);t["default"]=s.exports},cc44:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getFileType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("."),n=t[t.length-1];if(!n)return"";n=n.toLocaleLowerCase();var i=["png","jpg","jpeg","bmp","gif","webp"];if(i.includes(n))return"image";var o=["mp4","m4v"];if(o.includes(n))return"video";var a=["mp3","m4a","wav","aac"];if(a.includes(n))return"audio";var r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","plain"];return r.includes(n)?"office":"unknown"},t.preventClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.onoff?(n.onoff=!1,e(t)):uni.showToast({title:"操作过于频繁",icon:"none"})},n("4626")},ef1d:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={noDataPage:n("0437").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-bar bg-white search "},[n("v-uni-view",{staticClass:"search-form round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:e.$t("enter_verification_code"),"confirm-type":"search"},model:{value:e.reserveQrcode,callback:function(t){e.reserveQrcode=t},expression:"reserveQrcode"}})],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.scanCodeHandler()}}},[e._v(e._s(e.$t("scan_code")))]),n("v-uni-button",{staticClass:"cu-btn bg-gradual-red shadow-blur round",staticStyle:{"margin-left":"10px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.comfirmTimeId(e.reserveQrcode)}}},[e._v(e._s(e.$t("verification")))])],1)],1),e.reserveOrders&&e.reserveOrders.length>0?n("v-uni-view",e._l(e.reserveOrders,(function(t,i){return n("v-uni-view",{key:i,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[n("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[n("v-uni-view",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.$t("order_number"))),n("span",{staticClass:"text-gray",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.orderId))])])],1),n("v-uni-view",{staticClass:"flex margin-top justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("product_service")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.goodsName))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("verification_quantity")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.quantity))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("reservation_date")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.appointmentTime))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("reservation_hours")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.hours))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("reserver")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.personName)+"("+e._s(t.personTel)+")")])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(e.$t("verification_time")))]),n("v-uni-view",{staticClass:"text-gray"},[e._v(e._s(t.createTime))])],1)],1)})),1):n("v-uni-view",[n("no-data-page")],1)],1)},a=[]},f5fd:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getIntegralSetting=function(e,t){return new Promise((function(n,i){e.context.get({url:o.default.listIntegralSetting,data:t,success:function(e){0==e.data.code?n(e.data):i(e.data.msg)},fail:function(e){i(e)}})}))},t.getIntegralUserDetail=function(e,t){return new Promise((function(n,i){e.context.get({url:o.default.listIntegralUserDetail,data:t,success:function(e){0==e.data.code?n(e.data):i(e.data.msg)},fail:function(e){i(e)}})}))},t.getReserveGoodsConfirmOrder=function(e,t){return new Promise((function(n,i){e.context.get({url:o.default.listReserveGoodsConfirmOrder,data:t,success:function(e){0==e.data.code?n(e.data):i(e.data.msg)},fail:function(e){i(e)}})}))},t.listCouponPropertyUserDetail=function(e,t){return new Promise((function(n,i){e.context.get({url:o.default.listCouponPropertyUserDetail,data:t,success:function(e){0==e.data.code?n(e.data):i(e.data.msg)},fail:function(e){i(e)}})}))},t.saveReserveGoodsConfirmOrder=function(e,t){return new Promise((function(n,i){e.context.post({url:o.default.saveReserveGoodsConfirmOrder,data:t,success:function(e){0==e.data.code?n(e):wx.showToast({title:"核销状态:"+e.data.msg,icon:"none",duration:3e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},t.useIntegral=function(e,t){return new Promise((function(n,i){e.context.post({url:o.default.useIntegral,data:t,success:function(e){0==e.data.code?n(e):wx.showToast({title:"核销状态:"+e.data.msg,icon:"none",duration:3e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},t.writeOffCouponPropertyUser=function(e,t){return new Promise((function(n,i){e.context.post({url:o.default.writeOffCouponPropertyUser,data:t,success:function(e){0==e.data.code?n(e):wx.showToast({title:"核销状态:"+e.data.msg,icon:"none",duration:3e3})},fail:function(e){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},n("bf0f");var o=i(n("f3d1"));i(n("ecef"))}}]);