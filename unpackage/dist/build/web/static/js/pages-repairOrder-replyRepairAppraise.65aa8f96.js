(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repairOrder-replyRepairAppraise"],{"91eb":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-textarea",{attrs:{placeholder:e.$t("please_enter_reply_description")},model:{value:e.replyContext,callback:function(t){e.replyContext=t},expression:"replyContext"}})],1),n("v-uni-view",{staticClass:"flex flex-direction margin-top"},[n("v-uni-button",{staticClass:"cu-btn bg-green margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._reply()}}},[e._v("提交")])],1)],1)},o=[]},"929b":function(e,t,n){"use strict";n.r(t);var r=n("bc45"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},9542:function(e,t,n){"use strict";n.r(t);var r=n("91eb"),o=n("929b");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var i=n("828b"),u=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"018458e3",null,!1,r["a"],void 0);t["default"]=u.exports},bc45:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("bf30"),o=n("dae2"),a={data:function(){return{replyContext:"",repairId:"",ruId:""}},onLoad:function(e){this.java110Context.onLoad(),this.ruId=e.ruId,this.repairId=e.repairId},methods:{_reply:function(){(0,r.replyRepairAppraise)({replyContext:this.replyContext,communityId:(0,o.getCurrentCommunity)().communityId,ruId:this.ruId,repairId:this.repairId},this).then((function(e){0==e.code?uni.navigateBack({delta:1}):uni.showToast({icon:"none",title:e.data})}))}}};t.default=a},bf30:function(e,t,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.appraiseRepair=function(e){return new Promise((function(t,n){if(""!=e.remark)if(""!=e.repairId){var r={repairId:e.repairId,repairType:e.repairType,repairChannel:e.repairChannel,publicArea:e.publicArea,communityId:e.communityId,context:e.remark};e.context.post({url:o.default.appraiseRepairNew,data:r,success:function(e){t(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}else uni.showToast({title:i.default.t("wbhbxxxx"),icon:"none"});else uni.showToast({title:i.default.t("qtxpjnrs"),icon:"none"})}))},t.dispatchRepair=function(e){return new Promise((function(t,n){var r={staffId:e.staffId,staffName:e.staffName,context:e.content,repairId:e.repairId,repairType:e.repairType,action:e.action,communityId:(0,a.getCurrentCommunity)().communityId,photos:[],userId:e.userId,userName:e.userName},u=e.photos;u.forEach((function(e){r.photos.push({photo:e})}));var s="";""==r.context?s=i.default.t("please_enter_handling_comments"):""==r.staffId||""==r.staffName?s=i.default.t("qtxsf1"):""==r.repairId?s=i.default.t("errorData"):"TRANSFER"==r.action&&r.userId==r.staffId&&(s=i.default.t("bnzdgzj")),""==s?e.context.post({url:o.default.repairDispatch,data:r,success:function(e){t(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}}):wx.showToast({title:s,icon:"none",duration:2e3})}))},t.finishRepair=function(e){return new Promise((function(t,n){var r={feeFlag:e.feeFlag,context:e.content,repairId:e.repairId,repairChannel:e.repairChannel,publicArea:e.publicArea,maintenanceType:e.feeFlag,repairType:e.repairType,action:e.action,communityId:(0,a.getCurrentCommunity)().communityId,beforeRepairPhotos:[],afterRepairPhotos:[],repairObjType:e.repairObjType,userId:e.userId,userName:e.userName,storeId:e.storeId,choosedGoodsList:e.resourceStoreInfo,totalPrice:e.amount,payType:e.payType},u=e.beforeRepairPhotos;u.forEach((function(e){r.beforeRepairPhotos.push({photo:e})}));var s=e.afterRepairPhotos;s.forEach((function(e){r.afterRepairPhotos.push({photo:e})}));var c="";if(r.feeFlag?""==r.context?c=i.default.t("please_enter_handling_comments"):r.beforeRepairPhotos.length<=0||r.afterRepairPhotos.length<=0?c=i.default.t("qsctptt"):""==r.repairId?c=i.default.t("errorData"):("1001"==r.maintenanceType||"1003"==r.maintenanceType)&&r.choosedGoodsList.length<1?c=i.default.t("qxzwppp"):"1001"==r.maintenanceType&&""==r.payType?c=i.default.t("qxzzffssss"):("1001"==r.maintenanceType||"1003"==r.maintenanceType)&&r.choosedGoodsList.length>=1&&r.choosedGoodsList.forEach((function(e){(!e.useNumber||e.useNumber<1)&&(c=i.default.t("spslywww")),"1001"==r.maintenanceType&&(!e.price||e.price<0)&&(c=i.default.t("spjgywww"))})):c=i.default.t("qxzlxx"),""!=c)return wx.showToast({title:c,icon:"none",duration:2e3}),void(e.onoff=!0);"1002"!=r.maintenanceType&&"1004"!=r.maintenanceType||(r.useNumber=0,r.choosedGoodsList=[]),e.context.post({url:o.default.repairFinish,data:r,success:function(n){e.onoff=!0,t(n)},fail:function(t){e.onoff=!0,wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.loadRepairStaff=function(e,t){return new Promise((function(n,r){e.context.get({url:o.default.listRepairTypeUsers,data:t,success:function(e){n(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryDictInfo=function(e,t){return new Promise((function(n,r){e.context.get({url:o.default.queryDictInfo,data:t,success:function(e){n(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.queryRepairInfo=function(e,t){return new Promise((function(n,r){e.context.get({url:o.default.queryRepairInfo,data:t,success:function(e){n(e.data)},fail:function(e){wx.showToast({title:"",icon:"none",duration:2e3})}})}))},t.queryResourceStoreResName=function(e,t){return new Promise((function(n,r){e.context.get({url:o.default.queryResourceStoreResName,data:t,success:function(e){n(e)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.repairStart=function(e,t){return new Promise((function(n,r){e.context.post({url:o.default.repairStart,data:t,success:function(e){n(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.repairStop=function(e,t){return new Promise((function(n,r){e.context.post({url:o.default.repairStop,data:t,success:function(e){n(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},t.replyRepairAppraise=function(e,t){return new Promise((function(n,r){t.context.post({url:o.default.replyRepairAppraise,data:e,success:function(e){n(e.data)},fail:function(e){wx.showToast({title:i.default.t("server_error"),icon:"none",duration:2e3})}})}))},n("bf0f"),n("2797"),n("aa9c");var o=r(n("f3d1")),a=n("dae2"),i=r(n("479f"))}}]);