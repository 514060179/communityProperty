(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-roomRenovationRecordHandle-roomRenovationRecordHandle"],{"110f":function(t,o,e){"use strict";var n=e("b859"),i=e.n(n);i.a},"2bde":function(t,o,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(o,"__esModule",{value:!0}),o.deleteRoomRenovationRecord=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.deleteRoomRenovationRecord,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryDictInfo=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryDictInfo,data:o,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryRoomRenovation=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryRoomRenovation,data:o,success:function(o){t.onoff=!0,0==o.data.code?n(o.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryRoomRenovationRecord=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryRoomRenovationRecord,data:o,success:function(t){0==t.data.code?n(t.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryRoomRenovationRecordDetail=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryRoomRenovationRecordDetail,data:o,success:function(t){0==t.data.code?n(t.data.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.saveRoomRenovationDetail=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.saveRoomRenovationDetail,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.updateRoomDecorationRecord=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.updateRoomDecorationRecord,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.updateRoomRenovationState=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.updateRoomRenovationState,data:o,success:function(t){0==t.data.code?n(t.data):wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.updateRoomToExamine=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.updateRoomToExamine,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.uploadVideo=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.uploadVideo,data:o,header:{"Content-Type":"multipart/form-data"},success:function(t){0==t.data.code?n():wx.showToast({title:"服务器异常了1",icon:"none",duration:2e3})},fail:function(t){console.log(t),wx.showToast({title:"服务器异常了2",icon:"none",duration:2e3})}},e)}))},e("bf0f");var i=n(e("f0de"))},"3d6f":function(t,o,e){var n=e("c86c");o=n(!1),o.push([t.i,".block__title[data-v-4251eb49]{margin:0;font-weight:400;font-size:14px;color:rgba(69,90,100,.6);padding:%?40?% %?30?% %?20?%}",""]),t.exports=o},"4f35":function(t,o,e){"use strict";e.r(o);var n=e("ac60"),i=e("5b6e");for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return i[t]}))}(a);e("110f");var r=e("828b"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"4251eb49",null,!1,n["a"],void 0);o["default"]=u.exports},"5b6e":function(t,o,e){"use strict";e.r(o);var n=e("72a8"),i=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(a);o["default"]=i.a},"72a8":function(t,o,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,e("bf0f"),e("2797"),e("aa9c");var i=e("2bde"),a=e("2d9e"),r=n(e("840b")),u={data:function(){var t=this,o=function(o){return t.$t(o)};return{renovationInfo:[],imgList:[],photos:[],videoName:"",tempFilePath:"",content:"",communityId:"",violations:[{name:o("please_select_if_violation")},{name:o("yes"),value:"true"},{name:o("no"),value:"false"}],violationIndex:0,violation:"",uploadImage:{maxPhotoNum:4,imgTitle:o("image_upload"),canEdit:!0}}},components:{uploadImageAsync:r.default},onLoad:function(t){this.java110Context.onLoad();this.communityId=(0,a.getCurrentCommunity)().communityId,this.renovationInfo=JSON.parse(t.apply)},methods:{sendImagesData:function(t){var o=this;this.photos=[],t.length>0&&t.forEach((function(t){o.photos.push(t.fileId)}))},violationChange:function(t){if(this.violationIndex=t.target.value,0!=this.violationIndex){var o=this.violations[this.violationIndex];this.violation=o.value}else this.violation=""},_dispatchRecord:function(){var t=this;uni.showLoading({title:t.$t("uploading")+"..."});var o={rId:this.renovationInfo.rId,roomId:this.renovationInfo.roomId,roomName:this.renovationInfo.roomName,state:this.renovationInfo.state,stateName:this.renovationInfo.stateName,photos:this.photos,videoName:"",remark:this.content,detailType:"1001",communityId:this.communityId,examineRemark:"",isTrue:this.violation},e="";""==o.remark?e=t.$t("please_enter_handling_comments"):""==o.isTrue&&(e=t.$t("please_select_if_violation")),""==e?(0,i.updateRoomDecorationRecord)(this,o,!0).then((function(){uni.showToast({title:t.$t("save_successful")}),setTimeout((function(){uni.navigateBack({delta:1})}),1e3)})):uni.showToast({title:e,icon:"none"})}}};o.default=u},ac60:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return i})),e.d(o,"a",(function(){}));var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-uni-view",[e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-textarea",{attrs:{placeholder:t.$t("please_enter_handling_comments")},model:{value:t.content,callback:function(o){t.content=o},expression:"content"}})],1),e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-picker",{attrs:{value:t.violationIndex,range:t.violations,"range-key":"name"},on:{change:function(o){arguments[0]=o=t.$handleEvent(o),t.violationChange.apply(void 0,arguments)}}},[e("v-uni-view",[t._v(t._s(t.violations[t.violationIndex].name))])],1)],1),e("v-uni-view",{staticClass:"block__title"},[t._v(t._s(t.$t("related_images")))]),e("uploadImageAsync",{ref:"vcUploadRef",attrs:{communityId:t.communityId,maxPhotoNum:t.uploadImage.maxPhotoNum,canEdit:t.uploadImage.canEdit,title:t.uploadImage.imgTitle},on:{sendImagesData:function(o){arguments[0]=o=t.$handleEvent(o),t.sendImagesData.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"flex flex-direction margin-top"},[e("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t._dispatchRecord()}}},[t._v("提交")])],1)],1)},i=[]},b859:function(t,o,e){var n=e("3d6f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("967d").default;i("44632adb",n,!0,{sourceMap:!1,shadowMode:!1})}}]);