(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-writeOffCoupon"],{"8b60":function(t,e,n){"use strict";n.r(e);var o=n("96a8"),i=n("98ed");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var r=n("828b"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"3f0bf57e",null,!1,o["a"],void 0);e["default"]=s.exports},"96a8":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={noDataPage:n("0437").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-bar bg-white search "},[n("v-uni-view",{staticClass:"search-form round"},[n("v-uni-text",{staticClass:"cuIcon-search"}),n("v-uni-input",{attrs:{type:"text",placeholder:"输入核销码","confirm-type":"search"},model:{value:t.couponQrcode,callback:function(e){t.couponQrcode=e},expression:"couponQrcode"}})],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navigateToScan()}}},[t._v("扫码")]),n("v-uni-button",{staticClass:"cu-btn bg-gradual-red shadow-blur round",staticStyle:{"margin-left":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmTimeId(t.couponQrcode)}}},[t._v("核销")])],1)],1),t.couponOrders&&t.couponOrders.length>0?n("v-uni-view",t._l(t.couponOrders,(function(e,o){return n("v-uni-view",{key:o,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[n("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[n("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v("单号"),n("span",{staticClass:"text-gray",staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.uoId))])])],1),n("v-uni-view",{staticClass:"flex margin-top justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v("优惠券")]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.couponName)+"("+t._s(e.value)+")")])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v("用户")]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.userName)+"("+t._s(e.tel)+")")])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v("使用时间")]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.createTime))])],1),n("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[n("v-uni-view",{staticClass:"text-gray"},[t._v("用途")]),n("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.remark))])],1)],1)})),1):n("v-uni-view",[n("no-data-page")],1)],1)},a=[]},"98ed":function(t,e,n){"use strict";n.r(e);var o=n("cb8d"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},cb8d:function(t,e,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("0437")),a=o(n("bf7c")),r=o(n("f3d1")),s=n("dae2"),u=n("f5fd"),c=n("cc44"),d=o(n("9b8e"));d.default.prototype.$preventClick=c.preventClick;var f={data:function(){return{onoff:!0,orderImg:r.default.baseUrl+"img/order.png",couponOrders:[],page:1,loadingStatus:"loading",loadingContentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"},couponQrcode:"",modal:{showModal:!1,title:"暂停原因",text:"请填写暂停原因"}}},components:{noDataPage:i.default,uniLoadMore:a.default},onLoad:function(){this.java110Context.onLoad(),this._loadCouponUserDetail()},onShow:function(){var t=this.java110Context.getUserInfo(),e=t.storeId;this.storeId=e},methods:{_loadCouponUserDetail:function(){var t=this;(0,u.listCouponPropertyUserDetail)(this,{page:1,row:100,communityId:(0,s.getCurrentCommunity)().communityId}).then((function(e){t.couponOrders=e.data}))},navigateToScan:function(){setTimeout((function(){uni.navigateTo({url:"/pages/appointment/hou_one"})}),300)},comfirmTimeId:function(t){var e=this;t&&(e.couponQrcode=t,setTimeout((function(){uni.showModal({cancelText:"取消",confirmText:"核销",content:"核销码:"+t,success:function(n){n.confirm&&(wx.showToast({title:"请稍后",icon:"none"}),(0,u.writeOffCouponPropertyUser)(e,{couponQrcode:t,communityId:(0,s.getCurrentCommunity)().communityId,giftCount:1}).then((function(t){uni.showToast({title:"操作成功"}),e.couponQrcode="",wx.hideLoading(),e._loadCouponUserDetail()})))}})}),1e3))}}};e.default=f},cc44:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getFileType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("."),n=e[e.length-1];if(!n)return"";n=n.toLocaleLowerCase();var o=["png","jpg","jpeg","bmp","gif","webp"];if(o.includes(n))return"image";var i=["mp4","m4v"];if(i.includes(n))return"video";var a=["mp3","m4a","wav","aac"];if(a.includes(n))return"audio";var r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","plain"];return r.includes(n)?"office":"unknown"},e.preventClick=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.onoff?(n.onoff=!1,t(e)):uni.showToast({title:"操作过于频繁",icon:"none"})},n("4626")},f5fd:function(t,e,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getIntegralSetting=function(t,e){return new Promise((function(n,o){t.context.get({url:i.default.listIntegralSetting,data:e,success:function(t){0==t.data.code?n(t.data):o(t.data.msg)},fail:function(t){o(t)}})}))},e.getIntegralUserDetail=function(t,e){return new Promise((function(n,o){t.context.get({url:i.default.listIntegralUserDetail,data:e,success:function(t){0==t.data.code?n(t.data):o(t.data.msg)},fail:function(t){o(t)}})}))},e.getReserveGoodsConfirmOrder=function(t,e){return new Promise((function(n,o){t.context.get({url:i.default.listReserveGoodsConfirmOrder,data:e,success:function(t){0==t.data.code?n(t.data):o(t.data.msg)},fail:function(t){o(t)}})}))},e.listCouponPropertyUserDetail=function(t,e){return new Promise((function(n,o){t.context.get({url:i.default.listCouponPropertyUserDetail,data:e,success:function(t){0==t.data.code?n(t.data):o(t.data.msg)},fail:function(t){o(t)}})}))},e.saveReserveGoodsConfirmOrder=function(t,e){return new Promise((function(n,o){t.context.post({url:i.default.saveReserveGoodsConfirmOrder,data:e,success:function(t){0==t.data.code?n(t):wx.showToast({title:"核销状态:"+t.data.msg,icon:"none",duration:3e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},e.useIntegral=function(t,e){return new Promise((function(n,o){t.context.post({url:i.default.useIntegral,data:e,success:function(t){0==t.data.code?n(t):wx.showToast({title:"核销状态:"+t.data.msg,icon:"none",duration:3e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},e.writeOffCouponPropertyUser=function(t,e){return new Promise((function(n,o){t.context.post({url:i.default.writeOffCouponPropertyUser,data:e,success:function(t){0==t.data.code?n(t):wx.showToast({title:"核销状态:"+t.data.msg,icon:"none",duration:3e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:3e3})}})}))},n("bf0f");var i=o(n("f3d1"));o(n("ecef"))}}]);