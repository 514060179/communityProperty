(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-applyRoomRecordHandle-applyRoomRecordHandle"],{"64d7":function(t,o,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(o,"__esModule",{value:!0}),o.cutApplyRoomDiscountRecord=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.cutApplyRoomDiscountRecord,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.loadApplyRooms=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.listApplyRoom,data:o,success:function(o){t.onoff=!0,0==o.data.code?n(o.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.loadFeeDiscount=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryFeeDiscount,data:o,success:function(t){0==t.data.code?n(t.data.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryApplyRoomRecord=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.listApplyRoomDiscountRecord,data:o,success:function(t){0==t.data.code?n(t.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryApplyRoomRecordDetail=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.listApplyRoomDiscountRecordDetail,data:o,success:function(t){0==t.data.code?n(t.data.data):wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.queryDictInfo=function(t,o,e){return new Promise((function(n,a){t.context.get({url:i.default.queryDictInfo,data:o,success:function(t){n(t.data)},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.saveApplyRoomDiscountRecord=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.saveApplyRoomDiscountRecord,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.uploadCheckUpdate=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.updateApplyRoomDiscount,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},o.uploadReviewUpdate=function(t,o,e){return new Promise((function(n,a){t.context.post({url:i.default.updateReviewApplyRoomDiscount,data:o,success:function(t){0==t.data.code?n():wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:i18n.t("server_error"),icon:"none",duration:2e3})}},e)}))},e("bf0f");var i=n(e("f0de"))},"6b03":function(t,o,e){"use strict";var n=e("83a6"),i=e.n(n);i.a},"750c":function(t,o,e){"use strict";e("6a54");var n=e("f5bd").default,i=e("3639").default;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,e("bf0f"),e("2797"),e("aa9c");var a=e("64d7"),r=e("2d9e"),u=(i(e("d97e")),n(e("840b"))),s={data:function(){return{applyRoomInfo:[],imgList:[],photos:[],videoName:"",tempFilePath:"",content:"",communityId:"",violations:[{name:"请选择是否违规"},{name:"是",value:"true"},{name:"否",value:"false"}],violationIndex:0,violation:"",uploadImage:{maxPhotoNum:4,imgTitle:"图片上传",canEdit:!0}}},components:{uploadImageAsync:u.default},onLoad:function(t){this.java110Context.onLoad();this.communityId=(0,r.getCurrentCommunity)().communityId,this.applyRoomInfo=JSON.parse(t.apply)},methods:{sendImagesData:function(t){var o=this;this.photos=[],t.length>0&&t.forEach((function(t){o.photos.push(t.fileId)}))},violationChange:function(t){if(this.violationIndex=t.target.value,0!=this.violationIndex){var o=this.violations[this.violationIndex];this.violation=o.value}else this.violation=""},_dispatchRecord:function(){uni.showLoading({title:"上传中..."});var t={ardId:this.applyRoomInfo.ardId,roomId:this.applyRoomInfo.roomId,roomName:this.applyRoomInfo.roomName,state:this.applyRoomInfo.state,stateName:this.applyRoomInfo.stateName,photos:this.photos,videoName:"",remark:this.content,detailType:"1001",communityId:this.communityId,examineRemark:"",isTrue:this.violation},o="";""==t.remark?o="请填写处理意见":""==t.isTrue&&(o="请选择是否违规"),""==o?(0,a.saveApplyRoomDiscountRecord)(this,t,!0).then((function(){uni.showToast({title:"保存成功"}),setTimeout((function(){uni.navigateBack({delta:1})}),1e3)})):uni.showToast({title:o,icon:"none"})}}};o.default=s},"776e":function(t,o,e){"use strict";e.r(o);var n=e("750c"),i=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(a);o["default"]=i.a},"83a6":function(t,o,e){var n=e("d5fb");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("967d").default;i("9f6c034a",n,!0,{sourceMap:!1,shadowMode:!1})},d5fb:function(t,o,e){var n=e("c86c");o=n(!1),o.push([t.i,".block__title[data-v-e8d1e190]{margin:0;font-weight:400;font-size:14px;color:rgba(69,90,100,.6);padding:%?40?% %?30?% %?20?%}",""]),t.exports=o},e388:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return i})),e.d(o,"a",(function(){}));var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-uni-view",[e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-textarea",{attrs:{placeholder:"请输入处理意见"},model:{value:t.content,callback:function(o){t.content=o},expression:"content"}})],1),e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-picker",{attrs:{value:t.violationIndex,range:t.violations,"range-key":"name"},on:{change:function(o){arguments[0]=o=t.$handleEvent(o),t.violationChange.apply(void 0,arguments)}}},[e("v-uni-view",[t._v(t._s(t.violations[t.violationIndex].name))])],1)],1),e("v-uni-view",{staticClass:"block__title"},[t._v("相关图片")]),e("uploadImageAsync",{ref:"vcUploadRef",attrs:{communityId:t.communityId,maxPhotoNum:t.uploadImage.maxPhotoNum,canEdit:t.uploadImage.canEdit,title:t.uploadImage.imgTitle},on:{sendImagesData:function(o){arguments[0]=o=t.$handleEvent(o),t.sendImagesData.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"flex flex-direction margin-top"},[e("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t._dispatchRecord()}}},[t._v("提交")])],1)],1)},i=[]},e40b:function(t,o,e){"use strict";e.r(o);var n=e("e388"),i=e("776e");for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return i[t]}))}(a);e("6b03");var r=e("828b"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"e8d1e190",null,!1,n["a"],void 0);o["default"]=u.exports}}]);